main_controller_abi = """[{"name":"AddMarket","inputs":[{"name":"collateral","type":"address","indexed":true},{"name":"market","type":"address","indexed":false},{"name":"amm","type":"address","indexed":false},{"name":"mp_idx","type":"uint256","indexed":false}],"anonymous":false,"type":"event"},{"name":"SetDelegateApproval","inputs":[{"name":"account","type":"address","indexed":true},{"name":"delegate","type":"address","indexed":true},{"name":"is_approved","type":"bool","indexed":false}],"anonymous":false,"type":"event"},{"name":"SetDelegationEnabled","inputs":[{"name":"caller","type":"address","indexed":false},{"name":"is_enabled","type":"bool","indexed":false}],"anonymous":false,"type":"event"},{"name":"SetProtocolEnabled","inputs":[{"name":"caller","type":"address","indexed":false},{"name":"is_enabled","type":"bool","indexed":false}],"anonymous":false,"type":"event"},{"name":"SetImplementations","inputs":[{"name":"A","type":"uint256","indexed":true},{"name":"amm","type":"address","indexed":false},{"name":"market","type":"address","indexed":false}],"anonymous":false,"type":"event"},{"name":"AddMarketHook","inputs":[{"name":"market","type":"address","indexed":true},{"name":"hook","type":"address","indexed":true},{"name":"hook_type","type":"uint256","indexed":false},{"name":"active_hooks","type":"bool[4]","indexed":false}],"anonymous":false,"type":"event"},{"name":"RemoveMarketHook","inputs":[{"name":"market","type":"address","indexed":true},{"name":"hook","type":"address","indexed":true},{"name":"hook_debt_released","type":"uint256","indexed":false}],"anonymous":false,"type":"event"},{"name":"HookDebtAjustment","inputs":[{"name":"market","type":"address","indexed":true},{"name":"hook","type":"address","indexed":true},{"name":"adjustment","type":"int256","indexed":false},{"name":"new_hook_debt","type":"uint256","indexed":false},{"name":"new_total_hook_debt","type":"uint256","indexed":false}],"anonymous":false,"type":"event"},{"name":"AddMonetaryPolicy","inputs":[{"name":"mp_idx","type":"uint256","indexed":true},{"name":"monetary_policy","type":"address","indexed":false}],"anonymous":false,"type":"event"},{"name":"ChangeMonetaryPolicy","inputs":[{"name":"mp_idx","type":"uint256","indexed":true},{"name":"monetary_policy","type":"address","indexed":false}],"anonymous":false,"type":"event"},{"name":"ChangeMonetaryPolicyForMarket","inputs":[{"name":"market","type":"address","indexed":true},{"name":"mp_idx","type":"uint256","indexed":true}],"anonymous":false,"type":"event"},{"name":"SetGlobalMarketDebtCeiling","inputs":[{"name":"debt_ceiling","type":"uint256","indexed":false}],"anonymous":false,"type":"event"},{"name":"SetPegKeeperRegulator","inputs":[{"name":"regulator","type":"address","indexed":false},{"name":"with_migration","type":"bool","indexed":false}],"anonymous":false,"type":"event"},{"name":"CreateLoan","inputs":[{"name":"market","type":"address","indexed":true},{"name":"account","type":"address","indexed":true},{"name":"caller","type":"address","indexed":true},{"name":"coll_amount","type":"uint256","indexed":false},{"name":"debt_amount","type":"uint256","indexed":false}],"anonymous":false,"type":"event"},{"name":"AdjustLoan","inputs":[{"name":"market","type":"address","indexed":true},{"name":"account","type":"address","indexed":true},{"name":"caller","type":"address","indexed":true},{"name":"coll_adjustment","type":"int256","indexed":false},{"name":"debt_adjustment","type":"int256","indexed":false}],"anonymous":false,"type":"event"},{"name":"CloseLoan","inputs":[{"name":"market","type":"address","indexed":true},{"name":"account","type":"address","indexed":true},{"name":"caller","type":"address","indexed":true},{"name":"coll_withdrawn","type":"uint256","indexed":false},{"name":"debt_withdrawn","type":"uint256","indexed":false},{"name":"debt_repaid","type":"uint256","indexed":false}],"anonymous":false,"type":"event"},{"name":"LiquidateLoan","inputs":[{"name":"market","type":"address","indexed":true},{"name":"liquidator","type":"address","indexed":true},{"name":"account","type":"address","indexed":true},{"name":"coll_received","type":"uint256","indexed":false},{"name":"debt_received","type":"uint256","indexed":false},{"name":"debt_repaid","type":"uint256","indexed":false}],"anonymous":false,"type":"event"},{"name":"CollectAmmFees","inputs":[{"name":"market","type":"address","indexed":true},{"name":"amm_coll_fees","type":"uint256","indexed":false},{"name":"amm_debt_fees","type":"uint256","indexed":false}],"anonymous":false,"type":"event"},{"name":"CollectFees","inputs":[{"name":"minted","type":"uint256","indexed":false},{"name":"redeemed","type":"uint256","indexed":false},{"name":"total_debt","type":"uint256","indexed":false},{"name":"fee","type":"uint256","indexed":false}],"anonymous":false,"type":"event"},{"stateMutability":"nonpayable","type":"constructor","inputs":[{"name":"core","type":"address"},{"name":"stable","type":"address"},{"name":"monetary_policies","type":"address[]"},{"name":"debt_ceiling","type":"uint256"}],"outputs":[]},{"stateMutability":"view","type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address"}]},{"stateMutability":"view","type":"function","name":"get_market_count","inputs":[],"outputs":[{"name":"","type":"uint256"}]},{"stateMutability":"view","type":"function","name":"get_collateral_count","inputs":[],"outputs":[{"name":"","type":"uint256"}]},{"stateMutability":"view","type":"function","name":"get_all_markets","inputs":[],"outputs":[{"name":"","type":"address[]"}]},{"stateMutability":"view","type":"function","name":"get_all_collaterals","inputs":[],"outputs":[{"name":"","type":"address[]"}]},{"stateMutability":"view","type":"function","name":"get_all_markets_for_collateral","inputs":[{"name":"collateral","type":"address"}],"outputs":[{"name":"","type":"address[]"}]},{"stateMutability":"view","type":"function","name":"get_market","inputs":[{"name":"collateral","type":"address"}],"outputs":[{"name":"","type":"address"}]},{"stateMutability":"view","type":"function","name":"get_market","inputs":[{"name":"collateral","type":"address"},{"name":"i","type":"uint256"}],"outputs":[{"name":"","type":"address"}]},{"stateMutability":"view","type":"function","name":"get_amm","inputs":[{"name":"collateral","type":"address"}],"outputs":[{"name":"","type":"address"}]},{"stateMutability":"view","type":"function","name":"get_amm","inputs":[{"name":"collateral","type":"address"},{"name":"i","type":"uint256"}],"outputs":[{"name":"","type":"address"}]},{"stateMutability":"view","type":"function","name":"get_collateral","inputs":[{"name":"market","type":"address"}],"outputs":[{"name":"","type":"address"}]},{"stateMutability":"view","type":"function","name":"get_oracle_price","inputs":[{"name":"collateral","type":"address"}],"outputs":[{"name":"","type":"uint256"}]},{"stateMutability":"view","type":"function","name":"max_borrowable","inputs":[{"name":"market","type":"address"},{"name":"coll_amount","type":"uint256"},{"name":"n_bands","type":"uint256"}],"outputs":[{"name":"","type":"uint256"}]},{"stateMutability":"view","type":"function","name":"get_implementations","inputs":[{"name":"A","type":"uint256"}],"outputs":[{"name":"","type":"tuple","components":[{"name":"amm","type":"address"},{"name":"market_operator","type":"address"}]}]},{"stateMutability":"view","type":"function","name":"get_market_hooks","inputs":[{"name":"market","type":"address"}],"outputs":[{"name":"","type":"tuple[]","components":[{"name":"hooks","type":"address"},{"name":"hook_type","type":"uint256"},{"name":"active_hooks","type":"bool[4]"}]}]},{"stateMutability":"view","type":"function","name":"get_market_hook_debt","inputs":[{"name":"market","type":"address"},{"name":"hook","type":"address"}],"outputs":[{"name":"","type":"uint256"}]},{"stateMutability":"view","type":"function","name":"get_monetary_policy_for_market","inputs":[{"name":"market","type":"address"}],"outputs":[{"name":"","type":"address"}]},{"stateMutability":"view","type":"function","name":"get_peg_keeper_active_debt","inputs":[],"outputs":[{"name":"","type":"uint256"}]},{"stateMutability":"view","type":"function","name":"stored_admin_fees","inputs":[],"outputs":[{"name":"","type":"uint256"}]},{"stateMutability":"view","type":"function","name":"get_close_loan_amounts","inputs":[{"name":"account","type":"address"},{"name":"market","type":"address"}],"outputs":[{"name":"","type":"int256"},{"name":"","type":"uint256"}]},{"stateMutability":"view","type":"function","name":"on_create_loan_hook_adjustment","inputs":[{"name":"account","type":"address"},{"name":"market","type":"address"},{"name":"coll_amount","type":"uint256"},{"name":"debt_amount","type":"uint256"}],"outputs":[{"name":"","type":"int256"}]},{"stateMutability":"view","type":"function","name":"on_adjust_loan_hook_adjustment","inputs":[{"name":"account","type":"address"},{"name":"market","type":"address"},{"name":"coll_change","type":"int256"},{"name":"debt_change","type":"int256"}],"outputs":[{"name":"","type":"int256"}]},{"stateMutability":"view","type":"function","name":"on_close_loan_hook_adjustment","inputs":[{"name":"account","type":"address"},{"name":"market","type":"address"}],"outputs":[{"name":"","type":"int256"}]},{"stateMutability":"view","type":"function","name":"on_liquidate_hook_adjustment","inputs":[{"name":"caller","type":"address"},{"name":"market","type":"address"},{"name":"target","type":"address"}],"outputs":[{"name":"","type":"int256"}]},{"stateMutability":"nonpayable","type":"function","name":"setDelegateApproval","inputs":[{"name":"delegate","type":"address"},{"name":"is_approved","type":"bool"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"create_loan","inputs":[{"name":"account","type":"address"},{"name":"market","type":"address"},{"name":"coll_amount","type":"uint256"},{"name":"debt_amount","type":"uint256"},{"name":"n_bands","type":"uint256"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"adjust_loan","inputs":[{"name":"account","type":"address"},{"name":"market","type":"address"},{"name":"coll_change","type":"int256"},{"name":"debt_change","type":"int256"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"adjust_loan","inputs":[{"name":"account","type":"address"},{"name":"market","type":"address"},{"name":"coll_change","type":"int256"},{"name":"debt_change","type":"int256"},{"name":"max_active_band","type":"int256"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"close_loan","inputs":[{"name":"account","type":"address"},{"name":"market","type":"address"}],"outputs":[{"name":"","type":"int256"},{"name":"","type":"uint256"}]},{"stateMutability":"nonpayable","type":"function","name":"liquidate","inputs":[{"name":"market","type":"address"},{"name":"target","type":"address"},{"name":"min_x","type":"uint256"}],"outputs":[{"name":"","type":"int256"},{"name":"","type":"uint256"}]},{"stateMutability":"nonpayable","type":"function","name":"liquidate","inputs":[{"name":"market","type":"address"},{"name":"target","type":"address"},{"name":"min_x","type":"uint256"},{"name":"frac","type":"uint256"}],"outputs":[{"name":"","type":"int256"},{"name":"","type":"uint256"}]},{"stateMutability":"nonpayable","type":"function","name":"collect_fees","inputs":[{"name":"market_list","type":"address[]"}],"outputs":[{"name":"","type":"uint256"}]},{"stateMutability":"nonpayable","type":"function","name":"increase_hook_debt","inputs":[{"name":"market","type":"address"},{"name":"hook","type":"address"},{"name":"amount","type":"uint256"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"add_market","inputs":[{"name":"token","type":"address"},{"name":"A","type":"uint256"},{"name":"fee","type":"uint256"},{"name":"admin_fee","type":"uint256"},{"name":"oracle","type":"address"},{"name":"mp_idx","type":"uint256"},{"name":"loan_discount","type":"uint256"},{"name":"liquidation_discount","type":"uint256"},{"name":"debt_ceiling","type":"uint256"}],"outputs":[{"name":"","type":"address[2]"}]},{"stateMutability":"nonpayable","type":"function","name":"set_global_market_debt_ceiling","inputs":[{"name":"debt_ceiling","type":"uint256"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"set_implementations","inputs":[{"name":"A","type":"uint256"},{"name":"market","type":"address"},{"name":"amm","type":"address"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"add_market_hook","inputs":[{"name":"market","type":"address"},{"name":"hook","type":"address"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"remove_market_hook","inputs":[{"name":"market","type":"address"},{"name":"hook","type":"address"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"add_new_monetary_policy","inputs":[{"name":"monetary_policy","type":"address"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"change_existing_monetary_policy","inputs":[{"name":"monetary_policy","type":"address"},{"name":"mp_idx","type":"uint256"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"change_market_monetary_policy","inputs":[{"name":"market","type":"address"},{"name":"mp_idx","type":"uint256"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"set_peg_keeper_regulator","inputs":[{"name":"regulator","type":"address"},{"name":"with_migration","type":"bool"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"set_protocol_enabled","inputs":[{"name":"is_enabled","type":"bool"}],"outputs":[]},{"stateMutability":"nonpayable","type":"function","name":"setDelegationEnabled","inputs":[{"name":"is_enabled","type":"bool"}],"outputs":[]},{"stateMutability":"view","type":"function","name":"STABLECOIN","inputs":[],"outputs":[{"name":"","type":"address"}]},{"stateMutability":"view","type":"function","name":"CORE_OWNER","inputs":[],"outputs":[{"name":"","type":"address"}]},{"stateMutability":"view","type":"function","name":"peg_keeper_regulator","inputs":[],"outputs":[{"name":"","type":"address"}]},{"stateMutability":"view","type":"function","name":"markets","inputs":[{"name":"arg0","type":"uint256"}],"outputs":[{"name":"","type":"address"}]},{"stateMutability":"view","type":"function","name":"collaterals","inputs":[{"name":"arg0","type":"uint256"}],"outputs":[{"name":"","type":"address"}]},{"stateMutability":"view","type":"function","name":"market_contracts","inputs":[{"name":"arg0","type":"address"}],"outputs":[{"name":"","type":"tuple","components":[{"name":"collateral","type":"address"},{"name":"amm","type":"address"},{"name":"mp_idx","type":"uint256"}]}]},{"stateMutability":"view","type":"function","name":"monetary_policies","inputs":[{"name":"arg0","type":"uint256"}],"outputs":[{"name":"","type":"address"}]},{"stateMutability":"view","type":"function","name":"n_monetary_policies","inputs":[],"outputs":[{"name":"","type":"uint256"}]},{"stateMutability":"view","type":"function","name":"global_market_debt_ceiling","inputs":[],"outputs":[{"name":"","type":"uint256"}]},{"stateMutability":"view","type":"function","name":"total_debt","inputs":[],"outputs":[{"name":"","type":"uint256"}]},{"stateMutability":"view","type":"function","name":"minted","inputs":[],"outputs":[{"name":"","type":"uint256"}]},{"stateMutability":"view","type":"function","name":"redeemed","inputs":[],"outputs":[{"name":"","type":"uint256"}]},{"stateMutability":"view","type":"function","name":"isApprovedDelegate","inputs":[{"name":"arg0","type":"address"},{"name":"arg1","type":"address"}],"outputs":[{"name":"","type":"bool"}]},{"stateMutability":"view","type":"function","name":"isDelegationEnabled","inputs":[],"outputs":[{"name":"","type":"bool"}]},{"stateMutability":"view","type":"function","name":"is_protocol_enabled","inputs":[],"outputs":[{"name":"","type":"bool"}]},{"stateMutability":"view","type":"function","name":"total_hook_debt","inputs":[],"outputs":[{"name":"","type":"uint256"}]}]"""